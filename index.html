<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario Atención de Vuelo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0f172a; /* fondo oscuro */
      color: #f1f5f9;
      margin: 0;
      padding: 20px;
    }
    h2 {
      background-color: #1e293b;
      padding: 10px;
      border-radius: 6px;
      margin-top: 25px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, textarea, button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #475569;
      background-color: #1e293b;
      color: #f1f5f9;
    }
    input[type="number"] {
      -moz-appearance: textfield;
    }
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    button.time-btn {
      width: auto;
      margin-top: 5px;
      background-color: #2563eb;
      border: none;
      cursor: pointer;
    }
    button.time-btn:hover {
      background-color: #1d4ed8;
    }
    textarea {
      height: 80px;
    }
    .section {
      padding: 15px;
      background-color: #111827;
      border-radius: 10px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>Formulario de Atención de Vuelo</h1>
  <form id="vueloForm">
    
    <!-- INFORMACIÓN DEL VUELO -->
    <div class="section">
      <h2>Información del Vuelo</h2>
      <label>Fecha <input type="date" name="fecha"></label>
      <label>Escala <input type="text" name="escala"></label>
      <label>Matrícula <input type="text" name="matricula"></label>
      <label>Llegada N° Vuelo <input type="text" name="vueloLlegada"></label>
      <label>Posición de Parada <input type="text" name="posicion"></label>
    </div>

    <!-- PERSONAL DE RAMPA -->
    <div class="section">
      <h2>Personal de Rampa / Load Control</h2>
      <label>SSR Supervisor <input type="text" name="ssr"></label>
      <label>Colaborador 1 <input type="text" name="col1"></label>
      <label>Colaborador 2 <input type="text" name="col2"></label>
      <label>Colaborador 3 <input type="text" name="col3"></label>
      <label>Colaborador 4 Adicional <input type="text" name="col4"></label>
      <label>Colaborador Patio Equipaje 1 <input type="text" name="peq1"></label>
      <label>Colaborador Patio Equipaje 2 <input type="text" name="peq2"></label>
      <label>Colaborador Patio Equipaje 3 <input type="text" name="peq3"></label>
      <label>Colaborador Patio Equipaje 4 <input type="text" name="peq4"></label>
      <label>Conciliación Equipaje <input type="text" name="conciliacion"></label>
      <label>Chofer 1 <input type="text" name="chofer1"></label>
      <label>Chofer 2 <input type="text" name="chofer2"></label>
      <label>Chofer 3 <input type="text" name="chofer3"></label>
      <label>Chofer 4 <input type="text" name="chofer4"></label>
      <label>Load Control <input type="text" name="loadcontrol"></label>
    </div>

    <!-- PATIO DE EQUIPAJE -->
    <div class="section">
      <h2>Patio de Equipaje</h2>
      <label>Apertura 
        <input type="time" name="apertura">
        <button type="button" class="time-btn" onclick="setNow('apertura')">Ahora</button>
      </label>
      <label>Cierre 
        <input type="time" name="cierre">
        <button type="button" class="time-btn" onclick="setNow('cierre')">Ahora</button>
      </label>
    </div>

    <!-- PASAJEROS -->
    <div class="section">
      <h2>Pasajeros</h2>
      <label>Llegada Cantidad PAX <input type="number" name="pax"></label>
    </div>

    <!-- EQUIPAJE -->
    <div class="section">
      <h2>Equipaje</h2>
      <label>Llegada KG de equipajes <input type="number" name="kgEquipaje"></label>
      <label>Llegada Cantidad de bultos <input type="number" name="bultosEquipaje"></label>
    </div>

    <!-- CARGA -->
    <div class="section">
      <h2>Carga</h2>
      <label>Llegada KG de carga <input type="number" name="kgCarga"></label>
      <label>Llegada Cantidad de bultos <input type="number" name="bultosCarga"></label>
    </div>

    <!-- OTROS CAMPOS -->
    <div class="section">
      <h2>Otros Datos</h2>
      <label>Estado de Bolsín <input type="text" name="bolsin"></label>
      <label>Número de Precinto <input type="text" name="precinto"></label>
      <label>Calzas Colocación <input type="text" name="calzas"></label>
      <label>GPU Encendido <input type="text" name="gpuEnc"></label>
      <label>GPU Conexión Aeronave <input type="text" name="gpuCon"></label>
    </div>

    <!-- ASISTENCIAS y TIMINGS (ejemplo, se pueden extender todos) -->
    <div class="section">
      <h2>Asistencias y Tiempos</h2>
      <label>EA / EM Delantera Adose 
        <input type="time" name="eaDelantera">
        <button type="button" class="time-btn" onclick="setNow('eaDelantera')">Ahora</button>
      </label>
      <label>EA Trasera Adose 
        <input type="time" name="eaTrasera">
        <button type="button" class="time-btn" onclick="setNow('eaTrasera')">Ahora</button>
      </label>
      <label>Pasarela Adose 
        <input type="time" name="pasarela">
        <button type="button" class="time-btn" onclick="setNow('pasarela')">Ahora</button>
      </label>
    </div>

    <!-- OBSERVACIONES -->
    <div class="section">
      <h2>Observaciones</h2>
      <textarea name="observaciones"></textarea>
    </div>

    <button type="submit">Enviar</button>
  </form>

  <script>
    const form = document.getElementById("vueloForm");

    // --- Autoguardado en localStorage ---
    form.addEventListener("input", () => {
      const data = new FormData(form);
      const obj = {};
      data.forEach((value, key) => obj[key] = value);
      localStorage.setItem("vueloForm", JSON.stringify(obj));
    });

    // --- Cargar datos guardados ---
    window.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem("vueloForm");
      if (saved) {
        const obj = JSON.parse(saved);
        Object.keys(obj).forEach(key => {
          if (form.elements[key]) form.elements[key].value = obj[key];
        });
      }
    });

    // --- Botón de hora actual ---
    function setNow(name) {
      const now = new Date();
      const hh = String(now.getHours()).padStart(2, '0');
      const mm = String(now.getMinutes()).padStart(2, '0');
      form.elements[name].value = `${hh}:${mm}`;
      form.dispatchEvent(new Event("input")); // disparar autoguardado
    }

    // --- Enviar formulario (ejemplo simple) ---
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      alert("Formulario enviado. (Aquí iría el guardado en servidor)");
      localStorage.removeItem("vueloForm");
      form.reset();
    });
  </script>
</body>
</html>
